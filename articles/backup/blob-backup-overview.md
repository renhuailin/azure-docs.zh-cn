---
title: Azure Blob 操作备份概述
description: 了解 Azure Blob 的操作备份。
ms.topic: conceptual
ms.date: 05/05/2021
ms.openlocfilehash: 5d6113108a41430e9d864ff05095be4d440989ee
ms.sourcegitcommit: 02d443532c4d2e9e449025908a05fb9c84eba039
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/06/2021
ms.locfileid: "108767232"
---
# <a name="overview-of-operational-backup-for-azure-blobs"></a>Azure Blob 操作备份概述

Blob 的操作备份是一种托管的本地数据保护解决方案，它使你能够保护块 Blob 免受各种数据丢失情况的影响，如损坏、Blob 删除和意外存储帐户删除。 数据本地存储在源存储帐户中，并可在需要时恢复到选定时间点。 因此，它提供了一种保护 Blob 的简单、安全且经济高效的方法。

Blob 的操作备份与[备份中心](backup-center-overview.md)集成，还包括其他备份管理功能，可提供单一虚拟管理平台，帮助你大规模管理、监视、操作和分析备份。

## <a name="how-operational-backup-works"></a>操作备份的工作原理

Blob 的操作备份是一种“本地备份”解决方案。 因此，不会将备份数据传输到备份保管库，而是将其存储在源存储帐户中。 但是，备份保管库仍充当管理备份的单元。 这也是一个连续备份解决方案，这意味着你无需计划任何备份，所有更改都将保留并可从所选时间点的状态恢复。

操作备份使用 Blob 平台功能来保护数据，并在需要时允许恢复：

- **时间点还原**：[Blob 时间点还原](../storage/blobs/point-in-time-restore-overview.md)允许将 Blob 数据还原到以前的状态。 这进而使用“软删除”、“更改源”和“Blob 版本控制”在指定的持续时间内保留数据。 操作备份负责启用时间点还原，以及基础功能，以确保在指定的持续时间内保留数据。

- **删除锁定**：删除锁定可防止存储帐户被意外删除或被未经授权的用户删除。 配置时的操作备份还会自动应用删除锁定，以减少由于删除存储帐户而导致的数据丢失的可能性。

请参阅[支持矩阵](blob-backup-support-matrix.md)了解当前解决方案的限制。

### <a name="protection"></a>保护

可在“存储帐户”级别配置和管理操作备份，并将其应用到存储帐户中的所有块 Blob。 操作备份使用“备份策略”来管理备份数据（包括旧版本和已删除 Blob）保留的持续时间，以这种方式定义可以从其还原数据的时间段。 备份策略的最大保留期为 360 天，或相等的完整周数 (51) 或月数 (11)。

为存储帐户配置备份并为备份策略分配“n”天的保留期时，会按如下所述设置基础属性。 可以在存储帐户的 Blob 服务的“数据保护”选项卡中查看这些属性。

- **时间点还原**：按备份策略中的定义，设置为“n”天。 如果在配置备份之前，存储帐户已启用保留期为“x”天的时间点，则时间点还原持续时间将设置为两个值中的较大值，即 max(n,x)。 如果已经启用了时间点还原，并且指定的保留期大于备份策略中的保留期，则它将保持不变。

- **软删除**：设置为“n+5”天，即在备份策略中指定的持续时间再加 5 天。 如果为操作备份配置的存储帐户已启用软删除，并且保留期为“y”天，则软删除保留将设置为两个值中的最大值，即 max(n+5,y)。 如果已经启用了软删除，并且指定的保留期大于备份策略中的保留期，则它将保持不变。

- **Blob 版本控制和 Blob 更改源**：对于已经为操作备份配置的存储帐户，已启用版本控制和更改源。

- **删除锁定**：在存储帐户上配置操作备份也会对存储帐户应用删除锁定。 可以在存储帐户的“锁定”选项卡下查看备份应用的删除锁定。

要允许备份在要保护的存储帐户上启用这些属性，必须在相应的存储帐户上为备份保管库授予“存储帐户备份参与者”角色。

>[!NOTE]
>操作备份仅支持块 Blob 上的操作，无法还原容器上的操作。 如果通过调用“删除容器”操作从存储帐户中删除了容器，将无法使用还原操作来还原该容器。 建议启用软删除以增强数据保护和恢复。

### <a name="management"></a>管理

在存储帐户上启用备份后，会在备份保管库中创建与存储帐户相对应的备份实例。 可以通过其相应的备份实例对存储帐户执行任何与备份相关的操作，例如启动还原、监视、停止保护等。

操作备份还直接与备份中心集成，以帮助你集中管理所有存储帐户的保护，以及所有其他支持备份的工作负荷。 备份中心是用于满足所有备份要求的单一虚拟管理平台，如监视作业和备份及还原状态、确保符合性和治理、分析备份使用情况，以及执行与数据备份和还原相关的操作。

### <a name="restore"></a>还原

可以从恢复点存在的任何时间点还原数据。 当存储帐户处于受保护状态时，将创建一个恢复点，并且可以使用该恢复点来还原数据，前提是该帐户处于备份策略定义的保留期（因此可使用存储帐户中的 Blob 服务的时间点还原功能）。 操作备份使用 Blob 时间点还原从恢复点还原数据。

操作备份提供了一个选项，可用于还原存储帐户中的所有块 Blob，浏览和还原特定容器，或使用前缀匹配来还原 Blob 的子集。 所有还原只能对源存储帐户执行。

## <a name="pricing"></a>定价

使用 Blob 的操作备份时，不会产生任何管理费用或实例费用。 但是，会将产生以下费用：

- 使用 Blob 时间点还原完成还原，并基于处理的数据量收取费用。 有关详细信息，请参阅[时间点还原定价](../storage/blobs/point-in-time-restore-overview.md#pricing-and-billing)。

- 由于 [Blob 的软删除](../storage/blobs/soft-delete-blob-overview.md)、[Azure Blob 存储中的更改源支持](../storage/blobs/storage-blob-change-feed.md)和 [Blob 版本控制](../storage/blobs/versioning-overview.md)的数据保留期。

## <a name="next-steps"></a>后续步骤

- [配置和管理 Azure Blob 备份](blob-backup-configure-manage.md)