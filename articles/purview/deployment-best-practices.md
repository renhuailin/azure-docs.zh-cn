---
title: 部署最佳做法
description: 本文提供了有关部署 Azure 监控范围的最佳实践。 Azure 监控范围允许任何用户注册、发现、了解和使用数据源。
author: hophanms
ms.author: hophan
ms.service: purview
ms.subservice: purview-data-catalog
ms.topic: conceptual
ms.date: 11/23/2020
ms.openlocfilehash: 1b2841f69ebe91dac748a4b2e24dc0c33756b1da
ms.sourcegitcommit: cc13f3fc9b8d309986409276b48ffb77953f4458
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/14/2020
ms.locfileid: "97400686"
---
# <a name="azure-purview-deployment-best-practices"></a>Azure 监控范围部署最佳实践

本文介绍可帮助你将监控范围部署到生产环境中的常见任务。 这些任务可以在几个月或几个月内完成。 即使是已部署监控范围的组织也可以使用本指南来确保他们充分利用他们的投资。

数据管理平台 (（例如 Azure 监控范围) ）的计划良好部署可带来以下好处：

- 更好的数据发现
- 改进的分析协作
- 投资回报最大化。

## <a name="prerequisites"></a>先决条件

* 使用开发或生产订阅访问 Microsoft Azure
* 能够创建 Azure 资源，包括监控范围
* 在测试、开发或生产环境中访问数据源（如 Azure Data Lake Storage 或 Azure SQL）
  * 对于 Data Lake Storage，扫描所需的角色是 "读者" 角色
  * 对于 SQL，标识必须能够查询表以进行分类的采样
* 访问 Azure 安全中心或与安全中心管理员协作以进行数据标记

## <a name="identify-objectives-and-goals"></a>确定目标和目标

许多组织通过开发满足组织中独立组和数据域的特定要求的单独解决方案，开始了其数据管理旅程。 尽管经验可能因行业、产品和区域性而异，但大多数组织都发现很难为这些类型的解决方案维护一致的控件和策略。

在早期阶段，你可能想要确定的一些常见数据管理目标包括：

* 最大程度地提高数据的商业价值
* 启用数据使用者可以轻松查找、解释和信任数据的数据区域性
* 提高不同业务部门之间的协作能力，提供一致的数据体验
* 通过加快数据分析以实现云的优势来促进创新
* 通过各种技能小组的自助服务选项，缩短发现数据的时间
* 缩短向客户提供改善服务的分析解决方案的面市时间
* 降低由于使用特定于域的工具和不支持的技术而导致的操作风险

常见的方法是将这些首要目标分解为不同的类别和目标。 下面是一些示例：

|Category|目标|
|---------|---------|
|发现|管理员用户应能够扫描 Azure 和非 Azure 数据源 (包括本地源) 以便自动收集有关数据资产的信息。|
|分类|平台应基于数据采样自动对数据进行分类，并允许使用自定义分类进行手动重写。|
|消耗|业务用户应该能够查找有关业务和技术元数据的每个资产的信息。|
|沿袭|每个资产都必须显示基础数据集的图形视图，以便用户了解原始源和所做的更改。|
|协作|平台必须允许用户通过提供有关每个数据资产的其他信息进行协作。|
|报表|用户必须能够在数据空间上查看报告，其中包括需要额外扩充的敏感数据和数据。|
|数据治理|平台必须允许管理员定义访问控制的策略，并根据每个用户自动强制实施数据访问。|
|工作流|平台必须能够创建和修改工作流，以便可以轻松地扩展和自动化平台中的各种任务。|
|集成|其他第三方技术（例如票证或业务流程）必须能够通过脚本或 REST Api 集成到平台。|

## <a name="top-questions-to-ask"></a>要询问的热门问题

一旦你的组织同意高级目标和目标，就会有多个组提出的问题。 务必要收集这些问题，以便制定计划来解决所有问题。 在初始阶段可能会遇到的一些示例问题：

1. 什么是主组织数据源和数据系统？
2. 对于监控范围尚不支持的数据源，我有哪些选项？
3. 我们需要多少个监控范围实例？
4. 用户是谁？
5. 谁可以扫描新的数据源？
6. 谁可以修改监控范围中的内容？
7. 可以使用哪些过程来改善监控范围中的数据质量？
8. 如何在平台上启动现有关键资产、术语表术语和联系人？
9. 如何将与现有系统集成？
10. 如何收集反馈并构建可持续处理？

虽然你可能不会立即获得这些问题的答案，但它可以帮助你的组织为此项目创建框架，并确保所有 "必须有" 的要求都得到满足。

## <a name="include-the-right-stakeholders"></a>包含正确的利益干系人

若要确保成功实现整个企业的监控范围，必须涉及到适当的利益干系人。 初始阶段只涉及几个人。 但是，随着范围的扩大，你将需要其他角色来参与项目并提供反馈。

一些你可能想要包括的关键利益干系人：

|增添|角色|
|---------|---------|
|**首席数据官**|CDO 会监督一系列的功能，其中可能包括数据管理、数据质量、主数据管理、数据科学、商业智能和创建数据策略。 它们可以是监控范围实现项目的主办方。|
|**域/企业所有者**|影响工具使用情况并具有预算控制的业务人员|
|**数据分析人员**|能够为业务问题提供框架，分析数据以帮助领导人做出业务决策|
|**数据架构师**|设计用于关键业务线应用的数据库，以及设计和实现数据安全性|
|**数据工程师**|操作和维护数据堆栈，从不同源提取数据，集成和准备数据，设置数据管道|
|**数据科学家**|生成分析模型并设置要由 Api 访问的数据产品|
|**DB 管理**|在服务级别协议内拥有、跟踪和解决与数据库相关的事件和请求 (Sla) ;可能设置数据管道|
|**DevOps**|业务线应用程序开发和实现;可能包括编写脚本和业务流程功能|
|**数据安全专家**|评估总体网络和数据安全，这涉及传入和传出监控范围的数据|

## <a name="identify-key-scenarios"></a>确定密钥方案

监控范围可用于集中管理跨云环境和本地环境的组织数据房地产的数据管理。 若要获得成功的实现，必须确定对业务至关重要的关键方案。 这些方案可以跨业务部门边界，或影响上游或下游的多个用户角色。

可以通过多种方式编写这些方案，但至少应包含以下五个维度：

1. 角色–用户是谁？
2. 源系统–哪些数据源（例如 Azure Data Lake Storage Gen2 或 Azure SQL 数据库）？
3. 影响区域–此方案的类别是什么？
4. 详细方案-用户如何使用监控范围来解决问题？
5. 预期结果-成功条件是什么？

这些方案必须是特定的、可操作和可执行的，并具有可度量的结果。 可以使用的一些示例方案：

|方案|详细信息|增添|
|---------|---------|---------|
|为业务关键型资产分类|我需要了解每个数据集的相关信息，以便充分了解它是什么。 此方案包括有关目录中的数据集的业务和技术元数据数据。 数据源包括 Azure Data Lake Storage Gen2、Azure Synapse DW 和/或 Power BI。 此方案还包括本地资源，如 SQL Server。|业务分析师、数据科学家、数据工程师|
|发现业务关键资产|我需要有一个搜索引擎，可以搜索目录中的所有元数据。 我应该能够使用 "技术术语"、"使用通配符的简单或复杂搜索" 进行搜索。|业务分析师、数据科学家、数据工程师、数据管理|
|跟踪数据以了解其来源和排查数据问题|我需要使用数据沿袭来跟踪报表、预测或模型中的数据，使其返回到其原始源，并了解这些更改和数据在数据生命周期中的驻留位置。 此方案需要支持按优先级排列的数据管道 Azure 数据工厂和 Databricks。|数据工程科研人员|
|丰富关键数据资产的元数据|我需要用自动生成的技术元数据来扩充目录中的数据集。 分类和标签是一些示例。|数据工程、域/企业所有者|
|利用友好的用户体验控制数据资产|需要为业务特定的元数据提供业务术语表。 业务用户可以使用监控范围为自助服务方案批注其数据，并通过搜索轻松发现数据。|域/企业所有者、业务分析人员、数据科学家、数据工程师|

## <a name="deployment-models"></a>部署模型

如果你只有一个使用监控范围的小型组与基本消耗用例，这种方法就像有一个监控范围实例为整个组提供服务一样简单。 但是，你可能还想知道你的组织是否需要多个监控范围实例。 如果使用多个监控范围实例，则员工如何将资产从一个阶段升级到另一个阶段。

### <a name="determine-the-number-of-purview-instances"></a>确定监控范围实例的数量

在大多数情况下，整个组织应只有一个监控范围帐户。 此方法最大程度地利用了 "网络效果"，其中平台的值增加到了平台内数据的函数。

但是，这种模式有一些例外情况：

1. **测试新配置** -组织可能需要创建多个实例，以便在隔离环境中测试扫描配置或分类。 尽管有些平台（如术语表）中存在 "版本控制" 功能，但有一个 "可释放的" 实例可以自由地测试。
2. **分离测试、预生产和生产** –组织想要为存储在不同环境中的不同类型的数据创建不同的平台。 不建议这样做，因为这些类型的数据是不同的内容类型。 您可以使用顶级层次结构级别或类别的术语表术语来分隔内容类型。
3. **猜疑和联合模型** –猜疑通常具有多个单独运行的 (总线) ，在某些情况下，它们甚至不会彼此共享计费。 在这些情况下，组织最终将为每个 BU 创建一个监控范围实例。 此模型并不理想，但可能是必需的，尤其是因为通常情况下，通常不愿意共享计费。
4. **合规性** –有一些严格的符合性制度，它将元数据视为敏感，并要求它位于特定地理位置。 如果一家公司有多个地理区域，则唯一的解决方案是拥有多个监控范围实例，每个实例一个用于地域。

### <a name="create-a-process-to-move-to-production"></a>创建一个迁移到生产的进程

某些组织可能会通过使用监控范围的单个生产版本来决定使操作保持简单。 它们可能不需要超过发现、搜索和浏览方案。 如果某些资产的术语表术语不正确，请包容性。 但是，大多数要跨不同业务部门部署监控范围的组织都需要某种形式的过程和控制。

要包括在生产过程中的另一个重要方面是如何迁移分类和标签。 监控范围有超过90个系统分类器。 您可以对文件、表或列资产应用系统或自定义分类。 分类类似于主题标记，用于标记和识别在扫描过程中发现的特定类型的内容。 敏感度标签用于标识组织数据内分类类型的类别，然后将想要应用的策略分组到每个类别。 它利用与 Microsoft 365 相同的敏感信息类型，使你能够在整个内容和数据空间中延伸现有的安全策略和保护。 它可以扫描文档并对其进行自动分类。 例如，如果你有一个名为 multiple.docx 的文件，并且该文件的内容中包含一个国家/地区 ID 号，则监控范围将在资产详细信息页中添加分类，如欧盟国家标识号。

在监控范围中，目录管理员需要确保其生命周期的一致性和维护最佳实践的几个方面：

* **数据资产** –需要跨环境重新扫描数据源。 不建议仅在开发中进行扫描，然后在生产环境中使用 Api 重新生成它们。 主要原因是监控范围扫描程序在数据资产的幕后进行了更多的 "布线"，将它们移到不同的监控范围实例可能会很复杂。 只需在生产中添加相同的数据源，然后再次扫描源，就会容易得多。 通常，最佳做法是对使用的所有扫描、连接和身份验证机制进行说明。
* **扫描规则集** –这是分配给特定扫描的规则集合，如要检测的文件类型和分类。 如果你没有这很多扫描规则集，则可以直接通过生产手动重新创建它们。 这将需要内部进程和良好的文档。 但是，如果规则设置每日或每周的更改，则可以通过浏览 REST API 路由来解决此问题。
* **自定义分类** –您的分类可能也不会定期更改。 在部署的初始阶段，可能需要一段时间来了解各种要求，以提供自定义分类。 但一旦结算，这将需要少许更改。 此处的建议是，手动迁移任何自定义分类，或使用 REST API。
* **词汇表** –可以通过 UX 导出和导入词汇表术语。 对于自动化方案，还可以使用 REST API。
* **资源集模式策略** –对于要应用的任何典型组织而言，此功能非常先进。 在某些情况下，您的 Azure Data Lake Storage 具有文件夹命名约定和特定的结构，这可能会导致监控范围生成资源集时出现问题。 你的业务部门可能还需要更改资源集构造，并通过其他自定义来满足业务需求。 对于这种情况，最好通过 REST API 跟踪所有更改，并通过外部版本控制平台记录更改。
* **角色分配** –可在此控制谁有权访问监控范围及其拥有的权限。 监控范围还 REST API 支持导出和导入用户和角色，但这并不是与 API 兼容。 建议分配 Azure 安全组并改为管理组成员身份。

### <a name="plan-and-implement-different-integration-points-with-purview"></a>规划和实施监控范围的不同集成点

很可能是成熟的组织已经具有现有的数据目录。 关键问题是是否继续使用现有技术并与监控范围同步。 监控范围允许通过阿特拉斯 Api 发布信息，但这些信息并不是为了支持这种方案。 某些组织可能会通过从其他数据目录解决方案迁移现有的数据资产，最初决定如何开始使用监控范围。 这可以通过阿特拉斯 Api 作为单向方法来完成。 在长期设计中不应考虑在不同的目录技术之间进行同步。 通常情况下，每个业务单位可能会继续使用现有解决方案来处理较旧的数据资产，而监控范围则用于扫描更新的数据源。

对于其他集成方案，如票证、自定义用户界面和业务流程，你可以使用阿特拉斯 Api 和 Kafka 终结点。 一般情况下，有四个监控范围的集成点：

* **数据资产** –这使监控范围可以扫描商店的资产，以枚举这些资产的内容，并收集有关这些资产的任何现成可用元数据。 因此，对于 SQL，这可能是数据库、表、存储过程、视图和配置数据的列表，如所示 `sys.tables` 。 对于诸如 Azure 数据工厂 (ADF) ，这可能会枚举所有管道，并在创建、上次运行、当前状态时获取数据。
* **沿袭** –这使得监控范围可以从分析/数据变化系统收集有关数据如何移动的信息。 对于诸如 Spark 这样的内容，这可能会从笔记本的执行中收集信息，以查看笔记本引入的数据、其转换方式和输出位置。 对于类似 SQL 的内容，它可以分析查询日志来反向工程执行哪些变化操作和执行的操作。 根据需要，我们支持推送和拉取的沿袭。
* **分类** -这使得监控范围可以从数据源获取物理样本，并通过我们的分类系统运行这些示例。 分类系统指出了一段数据的语义。 例如，我们可能知道文件是 Parquet 文件，并且有三列，而第三列是字符串。 但我们在示例中运行的分类器会告诉我们，字符串是名称、地址或电话号码。 在此集成点上照明，这意味着我们定义了监控范围如何打开笔记本、管道、parquet 文件、表和容器等对象。
* **嵌入体验** –具有 "工作室 (" 的产品（如 ADF、SYNAPSE、SQL STUDIO、PBI 和 Dynamics) ）通常需要使用户能够发现他们要与之交互的数据，同时还会发现输出数据的位置。 监控范围的目录可通过提供嵌入体验来帮助加速这些体验。 此体验可以在 API 或合作伙伴的选项中出现 UX 级别。 通过嵌入对监控范围的调用，组织可以利用监控范围的数据房地产地图来查找数据资产，查看沿袭，检查架构，查看分级，联系人等。

## <a name="phase-1-pilot"></a>阶段1：试点

在此阶段中，必须为一小部分用户创建和配置监控范围。 通常情况下，这只是一组2-3 人员，共同努力完成端到端方案。 它们被视为组织中监控范围的拥护者。 此阶段的主要目标是确保可以满足关键功能，并且正确的利益干系人可以了解项目。

### <a name="tasks-to-complete"></a>要完成的任务

|任务|详细信息|持续时间|
|---------|---------|---------|
|收集 & 同意要求|与所有利益干系人讨论，收集一整套要求。 不同的角色必须参与对项目的每个阶段要完成的要求子集的同意。|1周|
|安装初学者工具包|浏览 [监控范围快速入门](create-catalog-portal.md) 并设置 [监控范围初学者工具包](tutorial-scan-data.md) ，以向所有利益干系人演示监控范围。|1 天|
|导航监控范围|了解如何从主页使用监控范围。|1 天|
|为沿袭配置 ADF|确定关键管道和数据资产。 收集连接到内部 ADF 帐户所需的所有信息。|1 天|
|扫描数据源，如 Azure Data Lake Storage|添加数据源并设置扫描。 确保扫描成功检测到所有资产。|2天|
|搜索和浏览|允许最终用户访问监控范围并执行端到端搜索和浏览方案。|1 天|

### <a name="acceptance-criteria"></a>验收条件

* 监控范围帐户已在组织租户下的组织订阅中成功创建。
* 具有多个角色的一小组用户可以访问监控范围。
* 监控范围配置为至少扫描一个数据源。
* 用户应能够提取监控范围的关键值，例如：
  * 搜索和浏览
  * 沿袭
* 用户应该能够在 "资产" 页中分配资产所有权。
* 演示和演示向关键利益干系人提出认知。
* 从管理中购买，批准 MVP 阶段的其他资源。

## <a name="phase-2-minimum-viable-product"></a>阶段2：最小可行产品

获得议定要求并参与了监控范围的业务单位后，下一步就是在 MVP) 版本中使用最低可行的 (产品。 在此阶段，会将监控范围的使用情况扩展到更多用户，这些用户需要水平和垂直地具有其他需求。 对于所有用户（如术语表、搜索和浏览），都必须水平满足关键方案。 对于每个业务单位或组，还会有更深入的要求，以涵盖特定的端到端方案，例如从 Azure Data Lake Storage 到 Azure Synapse DW 到 Power BI 的沿袭。

### <a name="tasks-to-complete"></a>要完成的任务

|任务|详细信息|持续时间|
|---------|---------|---------|
|[扫描 Azure Synapse Analytics](register-scan-azure-synapse-analytics.md)|开始载入你的数据库源并进行扫描，以填充关键资产|2天|
|[创建自定义分类和规则](create-a-custom-classification-and-classification-rule.md)|扫描资产后，你的用户可能会发现，在监控范围的默认分类旁边有更多分类的其他用例。|2-4 周|
|[扫描 Power BI](register-scan-power-bi-tenant.md)|如果你的组织使用 Power BI，则可以扫描 Power BI，以便收集数据科学家或数据分析师所使用的所有数据资产，这些资产要求包含存储层的沿袭。|1-2 周|
|[导入术语表术语](how-to-create-import-export-glossary.md)|在大多数情况下，你的组织可能已经开发了术语集术语和术语 "分配给资产" 的集合。 这将需要通过 .csv 文件导入到监控范围的过程。|1周|
|向资产添加联系人|对于顶级资产，你可能需要建立一个过程，以允许其他角色分配联系人或通过 REST Api 进行导入。|1周|
|添加敏感标签和扫描|对于某些组织而言，这可能是可选的，具体取决于使用 M365 的标记。|1-2 周|
|获取分类和敏感见解|对于监控范围中的报告和见解，你可以访问此功能来获取各种报告并向管理提供演示。|1 天|
|使用监控范围托管用户的板载添加用户|此步骤将要求监控范围管理员与 Azure Active Directory 管理员合作，以建立新的安全组以授予对监控范围的访问权限。|1周|

### <a name="acceptance-criteria"></a>验收条件

* 已成功将更多的用户组合到监控范围 (50 +) 
* 扫描业务关键数据源
* 导入和分配所有关键术语表术语
* 成功测试关键资产上的重要标记
* 成功满足参与业务单元用户的最小方案

## <a name="phase-3-pre-production"></a>阶段3：预生产

一旦 MVP 阶段过去，就可以规划预生产里程碑了。 你的组织可能会决定为预生产和生产创建单独的监控范围实例，或者保留相同的实例但限制访问。 此外，在此阶段中，你可能需要在本地数据源（例如 SQL Server）上进行扫描。 如果监控范围不支持数据源存在任何缺口，就可以浏览阿特拉斯 API 来了解更多的选项。

### <a name="tasks-to-complete"></a>要完成的任务

|任务|详细信息|持续时间|
|---------|---------|---------|
|使用扫描规则集优化扫描|你的组织将有大量用于预生产的数据源。 务必预先定义用于扫描的关键标准，以便在整个板中一致地应用分类和文件扩展名。|1-2 天|
|评估区域可用性以进行扫描|根据数据源的区域和对符合性和安全性的组织要求，你可能需要考虑哪些区域必须可用于扫描。|1 天|
|了解扫描时的防火墙概念|此步骤需要了解组织如何配置其防火墙，以及监控范围如何通过身份验证来访问数据源以进行扫描。|1 天|
|了解扫描时的私有链接概念|如果你的组织使用专用链接，则必须设计网络安全的基础，以便在要求中包含专用链接。|1 天|
|[扫描本地 SQL Server](register-scan-on-premises-sql-server.md)|如果你有本地 SQL Server，则这是可选的。 扫描需要设置 [自承载 Integration Runtime](manage-integration-runtimes.md) ，并将 SQL Server 添加为数据源。|1-2 周|
|将监控范围 REST API 用于集成方案|如果你有将监控范围与其他第三方技术（例如业务流程或票证系统）集成的要求，则可能需要浏览 REST API 区域。|1-4 周|
|了解监控范围定价|此步骤将为组织提供重要的财务信息以做出决策。|1-5 天|

### <a name="acceptance-criteria"></a>验收条件

* 已成功将至少一个业务部门与所有用户集成
* 扫描本地数据源，如 SQL Server
* POC 至少使用一种集成方案 REST API
* 完成计划以转向生产，其中应包括基础结构和安全方面的关键领域

## <a name="phase-4-production"></a>阶段4：生产

应遵循上述阶段来创建有效的信息管理，这是更好的监管程序的基础。 数据管理可帮助组织为日益增长的趋势（如 AI、Hadoop、IoT 和区块链）做好准备。 这只是很多东西数据和分析的开始，还可以讨论更多的数据和分析。 此解决方案的结果将提供：

* **专注于业务** 的解决方案-与业务需求和技术要求的方案一致。
* **未来准备就绪** -解决方案可最大程度地提高平台的默认功能，并使用配置或脚本活动的标准化行业实践来支持平台的改进/发展。

### <a name="tasks-to-complete"></a>要完成的任务

|任务|详细信息|持续时间|
|---------|---------|---------|
|启用防火墙时扫描生产数据源|如果在防火墙准备就绪时，这是可选的，但请务必浏览用于强化基础结构的选项。|1-5 天|
|启用专用链接|当使用专用链接时，此参数是可选的。 否则，你可以跳过此项，因为当启用 "专用" 时，它是 "必须具有" 条件。|1-5 天|
|创建自动化工作流|工作流非常重要，如批准、升级、审核和问题管理。|2-3 周|
|操作文档|数据管理不是一次性项目。 这是一项不断发展的计划，用于制定数据驱动的决策制定和创造业务机会。 记录关键步骤和业务标准至关重要。|1周|

### <a name="acceptance-criteria"></a>验收条件

* 已成功将所有业务部门及其用户加入
* 成功满足生产的基础结构和安全要求
* 成功满足用户所需的所有用例

## <a name="platform-hardening"></a>平台强化

可以执行其他强化步骤：

* 启用扫描防火墙资源或使用专用链接，提高安全性
* 微调范围扫描以提高扫描性能
* 使用 REST Api 导出关键元数据和属性以进行备份和恢复
* 使用工作流自动执行票证和事件，以避免人为错误

## <a name="next-steps"></a>后续步骤

- [教程：运行初学者工具包并扫描数据](tutorial-scan-data.md)
- [教程：在主页上导航并搜索资产](tutorial-asset-search.md)