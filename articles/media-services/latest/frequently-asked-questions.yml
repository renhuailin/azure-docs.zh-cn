### YamlMime:FAQ
metadata:
  title: Azure 媒体服务常见问题解答
  description: 获取 Azure 媒体服务常见问题的解答。
  ms.service: media-services
  ms.custom: contperf-fy21q4
  ms.openlocfilehash: 79c6e1abd5e7e7f7bdaf70b306387be8012d5098
  ms.sourcegitcommit: 5f659d2a9abb92f178103146b38257c864bc8c31
  ms.translationtype: HT
  ms.contentlocale: zh-CN
  ms.lasthandoff: 08/17/2021
  ms.locfileid: "122323803"
title: 有关 Azure 媒体服务的常见问题
summary: 本文解答了有关 Azure 媒体的常见问题。
sections:
- name: 疑难解答
  questions:
  - question: 在哪里可以找到有关媒体服务故障排除的信息？
    answer: >
      其他人可能遇到过与你相同的问题。  [故障排除问题集合](./questions-collection.md)中列出了这些问题。 我们根据常见的支持票证问题定期更新这些问题。 如果在该列表找不到你要的答案，请创建支持票证。
  - question: 如何查明此错误代码的含义？
    answer: >
      我们已在以下参考资料中记录了错误代码：[流式处理终结点错误代码](./stream-streaming-endpoint-error-codes-reference.md)、[实时事件错误代码](./live-event-error-codes-reference.md)和[作业错误代码](./job-error-codes-reference.md)。  如果在该列表找不到你要的答案，请创建支持票证。
  - question: 如何重置帐户凭据？
    answer: >
      你可以通过 CLI [重置帐户凭据](./account-reset-account-credentials.md)。
- name: 常规
  questions:
  - question: 什么是 Azure 媒体服务？
    answer: >
      Azure 媒体服务是一个基于云的平台，用于生成解决方案，以便实现广播质量的视频流、增强可访问性和分发、分析内容，等等。 无论你是应用开发人员、呼叫中心、政府机构还是娱乐公司，媒体服务都能帮助你创建应用，通过当今最热门的移动设备和浏览器向广大受众提供品质卓越的媒体体验。 要开始使用 Azure 媒体服务，请参阅 [Azure 媒体服务 v3 概述](media-services-overview.md)
- name: 参考
  questions:
  - question: 在哪里可以找到媒体服务 API 和 SDK？
    answer: >
      列表如下：

      - [OpenAPI 规范 (Swagger)](https://aka.ms/ams-v3-rest-sdk)

      - [Azure CLI](/cli/azure/install-azure-cli)

      - [.NET](https://aka.ms/ams-v3-dotnet-sdk)

      - [Java](https://aka.ms/ams-v3-java-sdk)

      - [Python](https://aka.ms/ams-v3-python-sdk)

      - [Node.js](https://aka.ms/ams-v3-nodejs-sdk)

      - [Go](https://aka.ms/ams-v3-go-sdk)

      - [Ruby](https://aka.ms/ams-v3-ruby-sdk)
  - question: 我应该使用客户端 SDK 还是直接写入 REST API？
    answer: >
      不建议尝试将媒体服务 REST API 直接包装到你自己的库代码中，因为针对生产用途正确执行此操作会要求你实现完整的 Azure 资源管理重试逻辑，并了解如何在 Azure 资源管理 API 中管理长时间运行的操作。 这由适用于各种语言（.NET、Java、Typescript、Python、Ruby 等）的客户端 SDK 自动为你进行处理，可降低重试逻辑出现问题或 API 调用失败的可能性。 客户端 SDK 都已对此进行了处理。 Postman 集合更多地是作为一种教学工具提供，用于演示在使用各种客户端 SDK 进行开发的过程中，客户端 SDK 在线实际执行的操作。
  - question: 在哪里可以找到媒体服务示例？
    answer: >
      有关示例列表，请参阅[媒体服务 v3 示例](samples-overview.md)一文。
  - question: 媒体服务的费用是多少？
    answer: >
      请参阅[媒体服务定价指南](https://azure.microsoft.com/pricing/details/media-services/)
  - question: 媒体服务配额和限制是多少？
    answer: >
      请参阅[媒体服务的配额和限制](limits-quotas-constraints-reference.md)
- name: 客户数据
  questions:
  - question: 媒体服务是否在服务区域之外存储任何客户数据？
    answer: >
      - 客户将自己的存储帐户附加到 Azure 媒体服务帐户。  所有资产数据都存储在这些关联的存储帐户中，客户控制此存储的位置和复制类型。

      - 与媒体服务帐户关联的其他数据（包括内容加密密钥、令牌验证密钥、JobInputHttp URL 以及其他实体元数据）存储在 Microsoft 拥有的存储中，而该存储则位于为媒体服务帐户选择的区域中。
        - 考虑到巴西南部和东南亚的[数据驻留要求](https://azure.microsoft.com/global-infrastructure/data-residency/#more-information)，其他帐户数据以区域冗余方式存储，包含在单个区域中。 东南亚的所有其他帐户数据存储在新加坡，巴西南部的数据存储在巴西。
        - 在除巴西南部和东南亚之外的区域，其他帐户数据还可以存储在[配对区域](../../best-practices-availability-paired-regions.md)中 Microsoft 拥有的存储中。
      - Azure 媒体服务是一种区域服务，不提供[高可用性](architecture-high-availability-encoding-concept.md)或数据复制。 如果客户需要这些功能，则强烈建议其使用多个区域中的媒体服务帐户来构建解决方案。  我们以指南的形式提供了一个示例，展示了如何使用媒体服务点播视频构建解决方案以实现高可用性。
  - question: 媒体服务是否提供高可用性或数据复制？
    answer: >
      -   Azure 媒体服务是一种区域服务，不提供高可用性或数据复制。 如果客户需要这些功能，则强烈建议其使用多个区域中的媒体服务帐户来构建解决方案。 我们以指南的形式提供了一个示例，展示了[如何使用媒体服务点播视频构建解决方案以实现高可用性](./architecture-high-availability-encoding-concept.md)。
- name: 使用媒体服务
  questions:
  - question: 什么是媒体服务资产？
    answer: >
      媒体服务资产是一个 Azure 存储帐户容器，用于上传的每个视频文件。  它具有一个用于转换和其他操作的唯一标识符。  请参阅[媒体服务 v3 中的资产](assets-concept.md)。
  - question: 如何创建媒体服务资产？
    answer: >
      每次你要上传媒体文件并对其执行编码或流式处理等操作时，都会创建资产来存储该媒体文件和与该媒体文件相关联的其他文件。 如果使用 Azure 门户，系统将自动创建资产。 如果不使用门户上传文件，则必须先创建资产。  若要了解如何创建资产，请参阅[创建资产](asset-create-asset-how-to.md)。
  - question: 什么是媒体服务转换？
    answer: >
      转换包含用于编码或分析媒体文件的指令。 将其视为一种方案。 它可以将多个编码指令应用于一个媒体文件。  作业使用它来转换文件。 有关转换的详细信息，请参阅[媒体服务中的转换和作业](transform-jobs-concept.md#transforms)中的转换。
  - question: 如何创建媒体服务转换？
    answer: >
      可以使用 REST、CLI 或适用于媒体服务的 SDK 创建转换。  请参阅[如何创建转换](transform-create-transform-how-to.md)，以使用 REST 或 CLI。  要使用 SDK，请参阅 Azure 示例存储库中提供的[媒体服务示例](https://github.com/Azure-Samples?q=media-services&type=&language=&sort=)。
  - question: 什么是媒体服务作业？
    answer: >
      作业是为开始使用转换对文件进行编码或分析而提出的请求。  你指示该作业转换输入资产中包含的文件。  你还指示它创建新的输出资产或使用现有的输出资产。  作业完成后，转换（编码、分析）的文件以及与这些文件相关联的其他文件将位于输出资产中。 有关作业的详细信息，请参阅[媒体服务中的转换和作业](transform-jobs-concept.md#jobs)。
  - question: 如何创建媒体服务作业？
    answer: >
      可以通过 [CLI](job-create-cli-how-to.md)、REST 或任何 SDK 在 Azure 门户中创建作业。 请参阅[媒体服务示例](https://github.com/Azure-Samples?q=media-services&type=&language=&sort=)，以选择你偏好的语言。
  - question: 什么是编码？
    answer: >
      媒体服务中的术语“编码”适用于将包含数字视频和/或音频的文件从一种标准格式转换为另一种标准格式的过程，其目的是 (a) 减小文件大小，和/或 (b) 生成与各种设备和应用兼容的格式。 此过程也称为视频压缩或转码。 请参阅[使用媒体服务编码视频和音频](./encode-concept.md)
  - question: 媒体服务提供哪些编码格式？
    answer: >
      媒体服务提供的常见编码格式是标准编码器。 有关所有格式的列表，请参阅[标准编码器格式和编解码器](encode-media-encoder-standard-formats-reference.md)。
  - question: 能否使用媒体服务创建自动生成的比特率阶梯？
    answer: >
      是的。  有关详细信息，请参阅[使用自动生成的比特率阶梯进行编码](./encode-autogen-bitrate-ladder.md)页。
  - question: 能否分析音频或视频文件？
    answer: >
      可以。 借助 Azure 媒体服务 v3，还可使用 Azure 视频分析器媒体版（从视频和音频文件中提取见解。 媒体服务 v3 分析器预设可用于提取这些见解。 如果需要更详细的见解，请直接使用 [Azure 视频分析器媒体版（以前称为视频分析器）](../../azure-video-analyzer/video-analyzer-for-media-docs/video-indexer-overview.md)。 如需了解何时使用视频分析器媒体版与媒体服务分析器预设，请查看[比较文档](../../azure-video-analyzer/video-analyzer-for-media-docs/compare-video-indexer-with-media-services-presets.md)。
  - question: 什么是媒体服务实时事件？
    answer: >
      媒体服务实时事件是引入实时视频源，并通过 RTMPS 协议或平滑流式处理进行广播的过程。 有关媒体服务实时事件的详细信息，请参阅[媒体服务中的实时事件和实时输出](live-event-outputs-concept.md)
  - question: 如何创建媒体服务实时事件？
    answer: >
      第一步是选择本地编码器。  我们提供了使用 [Wirecast](live-event-wirecast-quickstart.md) 和 [OBS](live-event-obs-quickstart.md) 创建实时事件的示例。 如果更想从媒体服务实时事件概述开始，请参阅[实时事件类型](stream-live-streaming-concept.md#live-event-types)。
  - question: 如何使用媒体服务直播活动进行实时听录？
    answer: >
      Azure 媒体服务提供了不同协议的视频、音频和文本。 如果使用 MPEG-DASH 或 HLS/CMAF 发布实时传送流，并包含视频和音频，我们的服务将以 IMSC1.1 兼容的 TTML 格式传递听录文本。 有关实时听录的详细信息，请参阅[实时听录](live-event-live-transcription-how-to.md)
  - question: 什么是媒体服务流式处理终结点？
    answer: >
      在媒体服务中，流式处理终结点表示动态（实时）打包和源服务，该服务可使用一个常见流式处理媒体协议（HLS 或 DASH）直接将实时和按需内容发送到客户端播放器应用。 此外，流式处理终结点  还为行业领先的 DRM 提供动态（实时）加密。  有关流式处理终结点的详细信息，请参阅 [Azure 媒体服务中的流式处理终结点（原点）](stream-streaming-endpoint-concept.md)
  - question: 什么是媒体服务流式处理定位符？
    answer: >
      若要使视频可供客户端进行播放，必须创建流定位符，然后生成流 URL。 流式处理定位符还用于应用包含媒体文件使用规则的流式处理策略。
  - question: 如何创建媒体服务流式处理定位符？
    answer: >
      要生成流式处理 URL，首先创建一个流式处理定位符。 然后连接流式处理终结点主机名和流式处理定位符路径。  请参阅[创建流定位符并生成 URL](create-streaming-locator-build-url.md)。
  - question: 什么是流式处理策略？
    answer: >
      使用流式处理策略可为流式处理定位符定义流式处理协议和加密选项。 媒体服务 v3 提供了一些预定义的流式处理策略。 有关详细信息，请参阅[流式处理策略](./stream-streaming-policy-concept.md)。
  - question: 如何创建媒体服务流式处理策略？
    answer: >
      有关可用于入门的预定义策略列表，请参阅[流式处理策略](./stream-streaming-policy-concept.md)。
  - question: 如何通过动态加密传送媒体内容？
    answer: >
      动态加密在媒体从计算机离开到存储、处理和传送的整个过程中确保其安全。 借助媒体服务，可以传送使用高级加密标准 (AES-128) 或三个主要数字版权管理 (DRM) 系统（Microsoft PlayReady、Google Widevine 和 Apple FairPlay）中任意一个动态加密的实时和请求内容。 请参阅[使用媒体服务动态加密保护内容](./drm-content-protection-concept.md)。
  - question: 如何监视媒体服务资源？
    answer: >
      使用 Azure Monitor 跟踪媒体服务资源的动态。  有关详细信息，请参阅[监视媒体服务](./monitoring/monitor-media-services.md)。 操作方法指南包括[监视媒体服务指标](./monitoring/media-services-metrics-howto.md)和[监视媒体诊断日志](./monitoring/media-services-diagnostic-logs-howto.md)。
  - question: 如何监视媒体服务实时事件？
    answer: >
      使用 [Azure 事件网格](./monitoring/reacting-to-media-services-events.md)监视实时事件，而无需轮询服务。 操作方法指南包括[使用 Azure 门户通过事件网格创建并监视媒体服务事件](./monitoring/monitor-events-portal-how-to.md)和[使用 Azure CLI 通过事件网格创建并监视 Azure 媒体服务事件](./monitoring/job-state-events-cli-how-to.md)。
  - question: 我可以在媒体服务中使用哪些视频播放器？
    answer: >
      媒体服务支持 Azure Media Player、Shaka 和 Video.js。 请参阅 [Azure Media Player 文档](../azure-media-player/azure-media-player-overview.md)、[如何将 Shaka Player 用于 Azure 媒体服务](./player-shaka-player-how-to.md)，或[如何将 Video.js 播放器用于 Azure 媒体服务](./player-media-players-concept.md)。
  - question: 媒体服务是否支持高可用性？
    answer: >
      有关媒体服务和高可用性的详细信息，请参阅[媒体服务和点播视频 (VOD) 的高可用性](./architecture-high-availability-encoding-concept.md)。
  - question: 在哪里可以找到一些媒体服务体系结构示例？
    answer: >
      简单！ 请参阅[媒体服务体系结构](./architecture-concept.md)，或访问 Azure 体系结构中心。
  - question: 如何从媒体服务 v2 迁移到媒体服务 v3？
    answer: >
      我们创建了[从 v3 迁移到 v3 的综合性指南](./migrate-v-2-v-3-migration-introduction.md)。  我们非常期待了解你的迁移体验和需求，所以请随时通过 GitHub 问题或支持票证提供反馈。
  - question: 如何使用托管标识将数据加密到媒体服务？
    answer: "请参阅[使用 Key Vault 密钥将数据加密到媒体服务帐户的教程](security-encrypt-data-managed-identity-cli-tutorial.md)，了解如何使用 CLI 将媒体服务与 Key Vault 配对，以对数据进行加密。  \n"
  - question: 如何使用托管标识授权媒体服务访问受限制的存储帐户？
    answer: >
      如果你要在存储帐户被配置为阻止来自未知 IP 地址的请求的情况下访问该存储帐户，请按照[使用媒体服务托管标识访问存储](security-access-storage-managed-identity-cli-tutorial.md)中的步骤操作。
- name: 流式处理
  questions:
  - question: 是否可以流式处理在其他解决方案中预编码或编码的现有 Mp4 文件？
    answer: "可以，媒体服务源服务器（流式处理终结点）支持将 MP4 文件动态打包为 HLS 或 DASH 流式处理格式。 但是，内容必须采用封闭的 GOP 格式进行编码，并且短 GOP 在 2-6 秒的持续时间范围内。 建议采用以下设置：2 秒 GOP、关键帧最大距离和最小距离为 2 秒以及恒定比特率编码（CBR 模式）。 可以支持使用 H264 或 HEVC 视频编解码器以及 AAC 音频格式进行编码的此格式的大多数内容。 还可以支持预编码的其他音频格式（例如 Dolby DD+）。 \n\n使其正常工作的关键是创建资产，使用 Blob 存储客户端 SDK 将预编码的资产上传到资产的容器中，然后生成所需服务器清单 (.ism) 和客户端清单文件。 以下 .NET 示例项目中提供了一个示例，演示如何执行此操作。  \n请参阅示例项目以了解详细信息 - [流式处理现有 MP4 文件](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/Streaming/StreamExistingMp4)\n\n请记住，使用此方法时会产生性能影响，因为 AMS 中的内置编码器还会生成二进制索引（.mpi 文件）以改进 MP4 文件的访问时间。  如果没有这些文件，服务器可以在高负载下（通过 HLS 或 Dash 流式处理现有单比特率 MP4 文件](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/Streaming/StreamExistingMp4)）使用稍多的 CPU。在通过此方法纵向扩展时，应在 Azure Monitor 中监视流式处理终结点 CPU 负载。  如果你计划使用在 AMS 外部预编码的大型 MP4 文件库进行生产，请提交支持票证以查看你的体系结构并询问如何提高预编码 Mp4 内容的源服务器性能。 \n"
  - question: Azure 媒体服务是否可以用于非常短格式的文件内容（如社交媒体应用程序中的内容）？
    answer: "简单地说，不推荐。  持续时间不到一分钟或两分钟的非常短格式的内容并不真正适用于自适应比特率流式处理。  如果要流式处理非常短格式的文件，建议将内容预编码为可使用单比特率轻松流式处理的格式。 \n\n由于大多数自适应比特率播放器需要时间来缓冲多个视频段，并且需要时间在自适应比特率阶梯向上或向下“移动”之前分析网络带宽，因此，为长度不到 30 秒的内容提供大量比特率通常没什么用。  当播放器根据网络状况将其启发式算法锁定在正确的播放比特率时，文件会以流式处理方式完成。  \n\n此外，某些播放器默认缓冲最多 3 个视频“段”。  每个段的持续时间可以是 2 到 6 秒。  对于非常短格式的视频，播放器可能会缓冲并开始播放 ABR 集的第一个选定比特率。 因此，如果需要生成 HLS 或 DASH 清单，建议使用单比特率 MP4 文件并将其上传到资产。 请参阅上述问题标题“是否可以流式传输现有 Mp4 文件...”，以了解有关如何实现此操作的详细信息。 \n\n仅当要从这些协议的功能中获益时，才需要以 HLS 或 DASH 格式传送文件。  对于单比特率流，它们仍可以提供许多功能，例如更快的寻找速度、DRM 支持、与 blob 存储中的渐进式下载 Mp4 相比更难以通过 URL 下载（但仍然可能！）。 针对 VTT 和 IMSC1 的字幕支持也是另一个好处。  此外，能够后期绑定其他音频再现内容或以备用语言进行配音使之在某些情况下成为一个有价值的选择。 \n"
- name: 编码
  questions:
  - question: 是否可以在媒体服务中使用外部编码的或现有 Mp4 文件？
    answer: >-
      可以，请参阅流式处理问题下有关“是否可以流式处理现有 MP4 文件”的部分，了解详细信息和指向示例应用程序（演示如何上传预编码的单比特率 Mp4 文件并生成服务器清单 (.ism) 和客户端清单 (.ismc)）的链接。

      请注意该问题/答案中也指出的源性能影响问题。
