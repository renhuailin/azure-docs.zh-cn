---
title: 应用服务环境概述
description: 有关应用服务环境的概述
author: ccompy
ms.assetid: 3d37f007-d6f2-4e47-8e26-b844e47ee919
ms.topic: article
ms.date: 09/07/2021
ms.author: ccompy
ms.custom: references_regions
ms.openlocfilehash: e422f6316cce204a4b6ea152ff9be4489bb3e331
ms.sourcegitcommit: 0770a7d91278043a83ccc597af25934854605e8b
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/13/2021
ms.locfileid: "124767900"
---
# <a name="app-service-environment-overview"></a>应用服务环境概述 
> [!NOTE]
> 本文介绍与独立 v2 应用服务计划一起使用的应用服务环境 v3
> 

Azure 应用服务环境是一项 Azure 应用服务功能，可提供完全隔离和专用的环境，以便高度安全地运行应用服务应用。 此功能可以托管：

- Windows Web 应用
- Linux Web 应用
- Docker 容器
- 函数

应用服务环境 (ASE) 适用于有以下要求的应用程序工作负荷：

- 大规模。
- 隔离和安全网络访问。
- 高内存利用率。
- 每秒请求数 (RPS) 高。 用户可以在单个 Azure 区域或多个 Azure 区域创建多个 ASE。 鉴于这种灵活性，ASE 非常适合具有高 RPS 需求的水平缩放无状态应用程序。

ASE 仅托管一个客户的应用程序，并在其一个 VNet 中进行托管。 客户可以对入站和出站应用程序网络流量进行精细控制。 应用程序可以通过 VPN 建立到本地公司资源的高速安全连接。

## <a name="usage-scenarios"></a>使用方案

应用服务环境有许多用例，包括：

- 内部业务线应用程序
- 需要超过 30 个 ASP 实例的应用程序
- 利用单租户系统满足内部合规性或安全性要求
- 网络隔离的应用程序托管
- 多层应用程序

多租户应用服务中的应用可以通过许多网络功能来访问网络隔离的资源，或让其自身变成网络隔离资源。 这些功能在应用程序级别启用。  使用 ASE 时，无需进行额外的配置即可将应用置于 VNet 中。 可以将应用部署到已在 VNet 中的网络隔离环境。 在 ASE 托管网络隔离应用的基础上，它也是单租户系统。 没有其他客户使用该 ASE。 如果确实需要完整的隔离情景，还可以将 ASE 部署到专用硬件上。 

## <a name="dedicated-environment"></a>专用环境

ASE 是在虚拟网络中运行的 Azure 应用服务的单租户部署。 

应用程序托管在应用服务计划中，而这些计划是在应用服务环境中创建的。 应用服务计划本质上是应用程序主机的预配配置文件。 横向扩展应用服务计划时，会创建更多应用程序主机，其中的每个主机中均包含该应用服务计划中的所有应用。 一个 ASEv3 总共可以包含跨各种应用服务计划组合的最多 200 个应用服务计划实例。 一个“独立 V2”应用服务计划本身最多可以包含 100 个实例。 

## <a name="virtual-network-support"></a>虚拟网络支持

ASE 功能将 Azure 应用服务部署到客户 Azure 资源管理器虚拟网络 (VNet) 的单个子网中。 将某个应用部署到 ASE 时，该应用将在分配给 ASE 的入站地址上公开。 如果 ASE 是使用内部 VIP 部署的，则所有应用的入站地址将是 ASE 子网中的某个地址。 如果 ASE 是使用外部 VIP 部署的，则入站地址将是 Internet 可寻址的地址，并且应用将位于公共 DNS 中。 

ASEv3 在其子网中使用的地址数根据你的实例数量以及流量大小而异。 有些基础结构角色会根据应用服务计划数量和负载自动缩放。 ASEv3 子网的建议大小是 /24 CIDR 块，其中包含 256 个地址，因为这可以容纳横向扩展到上限的 ASEv3。

ASE 中的应用无需启用任何功能即可访问 ASE 所在的同一 VNet 中的资源。 如果 ASE VNet 已连接到另一个网络，则 ASE 中的应用可以访问这些扩展网络中的资源。 网络上的用户配置可能会阻止流量。 

多租户版本的 Azure 应用服务包含了可使应用能够连接到各种网络的许多功能。 这些网络功能使得应用如同部署在 VNet 中一样。 ASEv3 中的应用无需经过任何配置即可放入 VNet 中。 使用 ASE 而不是多租户服务的优点在于，可以完全在应用程序配置的外部对 ASE 托管的应用进行任何网络访问控制。 对于多租户服务中的应用，必须对应用逐个启用相应功能，并使用 RBAC 或策略来防止发生任何配置更改。 

## <a name="feature-differences"></a>功能差异

ASEv3 相比于早期版本的 ASE 而言存在一些差异。 使用 ASEv3 时：

- 客户 VNet 中不存在网络依赖项。 可以按需保护所有入站和出站连接。 还可以按需路由出站流量。 
- 可以部署已启用区域冗余的 ASEv3。 只能在创建 ASEv3 期间设置区域冗余，并且只能在其中所有 ASEv3 依赖项都可实现区域冗余的区域中设置。 
- 可将 ASEv3 部署在专用主机组中。 主机组部署不是区域冗余的。 
- 缩放速度比 ASEv2 快得多。 尽管其缩放速度不像多租户服务中那样即时见效，但还是比 ASEv2 快得多。
- 不再需要对前端进行缩放调整。 ASEv3 前端会自动按照需求缩放，并部署在更合适的主机上。 
- 缩放不再会阻止 ASEv3 实例中的其他缩放操作。 对于 OS 和大小的某个组合，只能有一个缩放操作有效。 例如，当 Windows 小型应用服务计划正在缩放时，你可以开始一个同时要针对 Windows 中型计划或者除 Windows 小型计划以外的其他任何计划运行的缩放操作。 
- 可以通过全局对等互连访问内部 VIP ASEv3 中的应用。 使用 ASEv2 时无法通过全局对等互连进行访问。 

早期版本的 ASE 中提供的少数几项功能并未在 ASEv3 中提供。 在 ASEv3 中，无法：

- 发送 SMTP 流量。 你仍可以创建电子邮件触发的警报，但应用无法通过端口 25 发送出站流量
- 使用 FTP 部署应用
- 对应用使用远程调试
- 从 ASEv2 升级
- 使用网络观察程序或 NSG 流监视流量
- 为应用配置基于 IP 的 TLS/SSL 绑定

## <a name="pricing"></a>定价 

使用 ASEv3 时，有一种不同的定价模式，具体取决于你的 ASE 部署类型。 三种定价模式如下： 

- ASEv3：如果 ASE 是空的，则收费方式如同你有一个包含 Windows I1v2 实例的 ASP。 一个实例的费用并非附加性费用，这笔费用只会在 ASE 为空时应用。
- 可用性区域 ASEv3：至少有 9 笔 Windows I1v2 实例费用。 如果有 9 个或更多个应用服务计划实例，则可用性区域支持不收取额外的费用。 此外，AZ ASEv3 中的所有应用服务计划的最小实例计数为 3，以确保每个可用性区域中都有一个实例。 随着计划的横向扩展，这些计划将分散到各个可用性区域。 
- 专用主机 ASEv3：使用专用主机部署时，你需要按照创建 ASEv3 时的定价支付两个专用主机的费用，并在缩放时按照较小百分比的“独立 V2”费率支付每个核心的费用。

已提供独立 v2 的预留实例定价，并在[如何将预留折扣应用于 Azure 应用服务][reservedinstances]中进行了介绍。 [应用服务定价][pricing]的“独立 v2 计划”下提供了定价和预留实例定价。 

## <a name="regions"></a>区域

ASEv3 在以下区域中可用。 

|常规和专用主机 ASEv3 区域|   AZ ASEv3 区域|
|---------------------------------------|------------------|
|澳大利亚东部|    澳大利亚东部|
|澳大利亚东南部|巴西南部|
|巴西南部   |加拿大中部|
|加拿大中部|美国中部|
|印度中部  |美国东部|
|美国中部 |美国东部 2|
|东亚  | 法国中部|
|美国东部    | 德国中西部|
|美国东部 2| 日本东部|
|法国中部 | 北欧|
|德国中西部   |   美国中南部|
|Japan East | Southeast Asia|
|韩国中部  | 英国南部|
|美国中北部   | 西欧|
|北欧   | 美国西部 2|
|挪威东部    | |
|南非北部 | |
|美国中南部   | |
|Southeast Asia| |
|瑞士北部  | | 
|阿拉伯联合酋长国北部| |   
|英国南部| |    
|英国西部| |
|美国中西部    | | 
|西欧    | |
|美国西部    | | 
|美国西部 2| |
|美国西部 3| |

<!--Links-->
[reservedinstances]: ../../cost-management-billing/reservations/reservation-discount-app-service.md
[pricing]: https://azure.microsoft.com/pricing/details/app-service/windows/
