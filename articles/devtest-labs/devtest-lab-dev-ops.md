---
title: Azure 开发测试实验室和 DevOps 的集成
description: 了解如何在企业环境中的持续集成 (CI)/持续交付 (CD) 管道内使用 Azure 开发测试实验室的实验室。
ms.topic: conceptual
ms.date: 06/26/2020
ms.openlocfilehash: 9c18df3c651dc3f11bbaaec4e71aea38644dffe1
ms.sourcegitcommit: f6e2ea5571e35b9ed3a79a22485eba4d20ae36cc
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/24/2021
ms.locfileid: "128595078"
---
# <a name="integration-of-azure-devtest-labs-and-azure-devops"></a>Azure 开发测试实验室和 Azure DevOps 的集成
DevOps 是一种软件开发方法，它将软件开发 (Dev) 与操作 (Ops) 集成于一个系统。 此系统可能会随业务目标提供新的功能、更新和修补程序。 此方法包含基于目标、使用模式和客户反馈设计新功能，乃至在出现问题时修补、恢复和强化系统的所有内容。 此方法的一个容易识别的组件是持续集成 (CI)/持续交付 (CD) 管道。 CI/CD 管道通过一系列步骤（包括构建、测试和部署）来从提交获取信息、代码和资源，以生成系统。 本文重点介绍在企业环境中的管道内有效使用实验室的不同方式。 

## <a name="benefits-of-using-labs-in-devops-workflow"></a>在 DevOps 工作流中使用实验室的优势 

### <a name="focused-access"></a>集中访问 
使用实验室作为组件允许特定生态系统与一组有限的人员关联。 通常，在公共区域或特定功能上工作的团队或组将会分配给一个实验室。   

### <a name="infrastructure-replication-in-the-cloud"></a>在云中的复制基础结构 
开发人员可以快速设置一个开发生态系统，其中包含一个带有源代码和工具的开发环境。 开发人员还可以创建几乎与生产配置完全相同的环境。 它有助于实现更快的内部循环开发。 

### <a name="pre-production"></a>预生产 
在 CI/CD 管道中使用实验室，可以更轻松地在同一时间运行多个不同的预生产环境或计算机来进行异步测试。 可以在实验室中部署和管理不同的支持基础结构，如生成代理。 

## <a name="devops-with-devtest-labs"></a>具有开发测试实验室的 DevOps 

### <a name="development--operation"></a>开发/操作 
实验室应侧重于在功能区域中工作的团队。 此常见侧重允许共享特定于区域的资源，例如工具、脚本或资源管理器模板。 它允许更快地进行更改，同时将负面影响限制到较小的组。 这些共享资源允许开发人员使用所有必要的代码、工具和配置来创建开发 VM。 可以动态创建，也可以使用一个系统创建自定义基础映像。 开发人员不仅可以创建 VM，还可以基于必要的模板创建开发测试实验室环境，以在实验室中创建相应的 Azure 资源。 可以对实验室环境进行任何更改或破坏性工作，而不会影响任何其他人。 考虑以下场景：产品是安装在客户计算机上的独立系统。 在这种场景下，开发测试实验室已经改进了 VM 创建，包括使用项目安装其他软件和预构建客户配置，以便对代码进行更快的内部循环测试。 
  
## <a name="cicd-pipeline"></a>CI/CD 管道 
CI/CD 管道是 DevOps 中的一项关键组件，可通过开发人员的拉取请求移动代码，将代码与现有代码集成，并将其部署到生产生态系统。 所有资源不需要处于实验室中。 例如，可以在实验室外设置 Jenkins 主机，作为更持久的资源。 下面是将实验室集成到管道的一些具体示例。 

### <a name="build"></a>构建 
生成管道侧重于如何创建一个组件包，组件包将一起测试以移交给发布管道。 实验室可以是生成管道的一部分，作为生成代理和其他支持资源的位置。 能够动态构建基础结构可以实现更好的控制。 由于可以在实验室中拥有多个环境，因此使用构建 ID 作为环境信息的一部分以唯一标识特定构建的资源时，每个构建都可以异步运行。   

对于生成代理，实验室限制访问的能力提高了安全性并降低了意外损坏的可能性。  

### <a name="test"></a>测试 
开发测试实验室允许 CI/CD 管道自动创建可用于自动和手动测试的 Azure 资源（VM、环境）。 将使用项目或公式创建 VM，这些项目或公式使用构建过程中的信息来创建测试所需的不同自定义配置。   

### <a name="release"></a>发布 
在部署代码之前，开发测试实验室通常用于在发布部分中进行验证。 它类似于在构建部分中进行测试。 生产资源不应部署在开发测试实验室中。 

### <a name="customization"></a>自定义 
在 Azure DevOps 中，有一些现有任务允许在特定实验室中操作 VM 和环境。 尽管 Azure DevOps Services 是一种管理 CI/CD 管道的方法，但可以将实验室集成到支持调用 REST API、执行 PowerShell 脚本或使用 Azure CLI 等功能的任何系统中。 

尽管某些 CI/CD 管道管理器具有可以管理 Azure 和开发测试实验室中的资源的现有开源插件。 可能需要使用某些自定义脚本来满足管道的特定需求。  考虑到这一点，执行任务时，服务主体将采用适当的角色，以获得对实验室的访问权限。 服务主体通常需要参与者角色访问实验室。 有关详细信息，请参阅[将 Azure 开发测试实验室集成到 Azure DevOps 持续集成和交付管道](devtest-lab-integrate-ci-cd.md)。 
 