---
title: 使用声明功能
description: 了解使用 Azure 开发测试实验室的认领/取消认领功能的不同情况
ms.topic: conceptual
ms.date: 06/26/2020
ms.openlocfilehash: d50ab660433ac9b2616a897e1110d466eb143a9a
ms.sourcegitcommit: f6e2ea5571e35b9ed3a79a22485eba4d20ae36cc
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/24/2021
ms.locfileid: "128559278"
---
# <a name="use-claim-capabilities-in-azure-devtest-labs"></a>使用 Azure 开发测试实验室的认领功能
Azure 开发测试实验室服务可提高开发人员和测试人员的工作效率和有效性。 本文重点介绍在 Azure 开发测试实验室中认领或取消认领虚拟机的功能。 本文还列出了此功能改进用户体验的各种方式。 在查看可以使用此功能的不同情况之前，让我们来看看“认领”是什么及其工作原理。

## <a name="claimable-machines"></a>可认领计算机
可认领计算机是指在没有所有者的实验室中创建的虚拟机 (VM)。 计算机被认领后，用户将拥有该虚拟机的各种选项。 用户认领计算机时，会进行一些更改。 虚拟机将从“可认领虚拟机”列表移动到 Azure 门户中的“我的虚拟机”列表。 

用户可以连接到虚拟机，自定义项目、重新启动、停止或取消认领计算机。 可通过几种方法使虚拟机变为可认领状态：

- 创建计算机并对其取消认领，使其移动到可认领池。 
- 使用[“高级设置”](https://azure.microsoft.com/updates/azure-devtest-labs-claim-lab-vms-from-a-shared-pool/)创建虚拟机，并将其放置在共享池中。

在这两种情况下，可以有效地使用认领/取消认领功能。 第一种情况需要提高预见性和更好地设计和执行。 第二种情况更取决于环境。 以下是不同方案的一些示例。

## <a name="designed-use-of-claimable-machines"></a>可认领计算机的设计用途

- “软件开发/测试”：使开发人员或测试人员可以更高效地使已配置的计算机就绪并使其处于未认领状态。 如果使用一组具有不同配置、必要工具和最新代码的虚拟机，则用户无需花费时间来设置计算机，即可认领虚拟机并开始工作。 在虚拟机被认领之前，计算机将预配但关闭，从而降低使用不太频繁的计算机带来的成本。 需要虚拟机时，用户只需认领虚拟机即可启动计算机。 在这种情况下，取消认领选项并不太有用，因为创建新虚拟机通常更简单、更便宜。
- “课堂/实验室”：对虚拟机预进行预配置用于课堂或实验室，使学生可以使用 Azure 门户立即连接到计算机。  学生认领虚拟机后，实验室确保任何人都无法认领同一台计算机。 自动执行此过程可确保有需要数量、具有指定环境的计算机可用。 如果学生未上课或迟到，则未认领的计算机可以保持可用状态，直到课程结束，并保持最低成本。 在此情况中，取消认领选项不太有用，因为虚拟机在上一个用户结束时处于未知状态。
- “演示”：使用计算机进行演示，其中实验室的计算机设置为特定环境。 此功能非常适用于以下情况：多人可能会同时或在随机时间进行演示，如举行会议。 在这种情况下，取消认领选项可能很有用，因为演示不会更改计算机的状态，从而允许用户将虚拟机归还到可认领池用于下一次演示。 在未认领的计算机取消预配并以最低成本运行的情况下，可以将实验室虚拟机保留更长的时间。
- “临时/协定辅助角色”：允许用户使用计算机。 用户离开后，会将虚拟机返还到可认领池，而不会丢失数据。 如果虚拟机未被认领，其他用户可以认领虚拟机并继续或查看计算机以获取其他信息。
- “一般”：对于许多不同的情况而言，按特定频率自动配置和部署虚拟机的功能很有用。 在多个不同的情况下，认领/取消认领功能可以通过自动化过程来构建具有已设置配置的未认领虚拟机，从而帮助用户提高效率。 配置可能包括不同的操作系统、语言、磁盘或[其他软件（项目）](devtest-lab-artifact-author.md)，具体取决于你的需求。 从实验室认领虚拟机的功能使实验室用户无需花费时间或精力来配置计算机，即可获得正确配置的系统。 实验室管理员可以使用虚拟机的认领状态来改进生成的计算机数、清理计算机并确定配置的优先级。 [映像工厂](image-factory-create.md)很好地示范了为多个实验室构建虚拟机和映像。 脚本可进行适当的修改，以执行以下任何一种情况，或将其用作创建自定义系统的参考。

## <a name="situational-use-of-claimable-machines"></a>可认领计算机的情景用途

- 使用认领/取消认领功能，使用户无需明确知道接下来将由谁选择计算机，即可将一台计算机的控制权传递给另一台计算机。
- 开发、测试和调试方案，特定的计算机配置可以再现 bug，之后可以取消认领计算机，允许其他开发人员认领该计算机并继续工作。 世界各地不同区域的多名工作人员开展远程工作时，此功能特别有用。 
- 团队成员可以使用单一环境工作。 例如，你可以手动设置无法自动化的复杂环境，或创建只能处理单个输入（如映像）修改的资源。 过去，解决此问题的方法是启动并运行专用计算机。 可认领功能通过提供内置用户访问控制和直观标识（如果可用）来改进手动过程。 被取消认领时，虚拟机将取消预配以降低成本。
- 有附加到虚拟机的数据磁盘。 每个磁盘最多有约 1 TB 的数据，从而可以传递大量数据，而无需复制数据。 虚拟机最初创建时使用的是包含大量数据的附加磁盘。  然后，任何用户都可以认领该计算机并访问数据。 使用完后，取消认领虚拟机以允许其他用户访问该计算机。

使用可认领计算机时，有一些注意事项，主要是关于获取计算机访问权限。 如果计算机已加入域，则认领计算机的用户必须已获得访问权限，通常方式是在创建虚拟机时向包含实验室中所有用户的组授予访问权限。 如果计算机未加入域，则需要运行公共存储库中的“RESET 虚拟机密码”项目，以便将用户添加为管理员。  即使计算机已启动或被认领，也可以应用项目。

## <a name="next-steps"></a>后续步骤
请参阅以下文章：[在 Azure 开发测试实验室中创建和管理可认领虚拟机](devtest-lab-add-claimable-vm.md)
