---
title: 自动优化 - 个性化体验创建服务
description: 本文提供有关 Azure 个性化体验创建服务的自动优化功能的概念性概述。
author: jeffmend
ms.author: jeffme
ms.manager: nitinme
ms.service: cognitive-services
ms.subservice: personalizer
ms.topic: conceptual
ms.date: 03/08/2021
ms.openlocfilehash: 603dc55b96d12610bc023487e731c7599841c985
ms.sourcegitcommit: 16e25fb3a5fa8fc054e16f30dc925a7276f2a4cb
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/25/2021
ms.locfileid: "122829413"
---
# <a name="personalizer-auto-optimize-preview"></a>个性化体验创建服务自动优化（预览版）


## <a name="introduction"></a>简介
个性化体验创建服务自动优化通过自动搜索经过改进的用于训练模型的学习设置并应用这些设置，来减少让个性化体验创建服务循环以最佳机器学习性能保持运行所需的手动工作。 个性化体验创建服务实施严格的准则来应用新的学习设置，以确保改进措施不太可能导致奖励损失。

个性化体验创建服务自动优化目前以公共预览版提供，其功能、方法和过程将根据用户反馈而改变。

## <a name="when-to-use-auto-optimize"></a>何时使用自动优化
在大多数情况下，最好的做法是使自动优化保持打开状态。 对于新的个性化体验创建服务循环，默认已打开自动优化。

在以下场合下，自动优化可能有所帮助：
* 你要构建由多个租户使用的应用程序，其中每个租户获取自己的个性化体验创建服务循环；例如，你要托管多个电子商务站点。 自动优化可让你避免优化大量个性化体验创建服务循环的学习设置而需要付出的手动工作。
* 你已部署个性化体验创建服务，并已验证它可以正常工作、可获得较好的奖励，并确认功能中不存在 bug 或问题。

> [!NOTE]
> 自动优化将定期覆盖个性化体验创建服务学习设置。 如果你的用例或行业要求审核并存档模型和设置，或者你需要备份以前的设置，则可以使用个性化体验创建服务 API 来检索学习设置，或者通过 Azure 门户下载这些设置。

## <a name="how-to-enable-and-disable-auto-optimize"></a>如何启用和禁用自动优化
若要启用自动优化，请在 Azure 门户上的“模型和学习设置”边栏选项卡中使用切换开关。 

或者，可以使用个性化体验创建服务 `/configurations/service` API 激活自动优化。

若要禁用自动优化，请将切换开关切换到关闭位置。

## <a name="auto-optimize-reports"></a>自动优化报告

在“模型和学习设置”边栏选项卡中，可以查看自动优化运行以及针对每个运行执行的操作的历史记录。 

表中显示：
* 自动优化运行何时发生；
* 包括哪个数据窗口；
* 联机、基线和发现的最佳学习设置的奖励性能；
* 执行的操作：学习设置是否已更新。

每个自动优化历史记录行中不同学习设置的奖励性能将以绝对数以及相对于基线性能的百分比显示。 

示例：如果基线平均奖励估算为 0.20，而联机个性化体验创建服务行为达到了 0.30，则这些会分别显示 100% 和 150%。 如果自动优化发现学习设置能够达到 0.40 的平均奖励，则会显示 200%（0.40 是 0.20 的 200%）。 假设置信度裕度允许的话，将应用新设置，然后，下一次运行之前，这些设置会作为联机设置来驱动个性化体验创建服务。

最多保留过去 24 个自动优化运行的历史记录供你分析。 可以查找有关这些脱机评估的更多详细信息以及每个评估的报告。 此外，报告包含此历史记录中的任何学习设置，你可以查找、下载或应用这些设置。

## <a name="how-it-works"></a>工作原理
个性化体验创建服务基于奖励持续训练它使用的 AI 模型。 这种训练遵循某些学习设置，这些设置包含超参数以及训练过程中使用的其他值。 可以根据特定的个性化体验创建服务实例“优化”这些学习设置。 

个性化体验创建服务还可以执行脱机评估。 脱机评估分析以往的数据，并可以生成个性化体验创建服务的不同算法和模型可实现的平均奖励的统计估算值。 在此过程中，个性化体验创建服务还会搜索更好的学习设置，并估算这些设置在过去相应时段内的性能（获得的奖励数）。

#### <a name="auto-optimize-frequency"></a>自动优化频率
自动优化定期运行，并基于以往的数据执行自动优化
* 如果应用程序在过去两周向个性化体验创建服务发送了大约 20 Mb 以上的数据，则自动优化将使用过去两周的数据。
* 如果应用程序发送的数据小于此数量，则个性化体验创建服务将添加两周前若干天的数据，直到有足够的数据可供优化或它访问最早存储的数据（达到了数据保留天数）。

自动优化运行的确切时间和天数由个性化体验创建服务确定，并且会随时间的推移而波动。

#### <a name="criteria-for-updating-learning-settings"></a>有关更新学习设置的准则

个性化体验创建服务使用这些奖励估算值来确定是否要为其他运行更改当前学习设置。 每项估算都有一条分布曲线，其中的置信度上限和下限为 95%。 仅当出现以下情况时，个性化体验创建服务才应用新的学习设置：
  * 在评估期这些设置带来了更高的平均奖励，并且
  * 这些设置达到了 95% 置信度区间下限，即，高于联机学习设置的 95% 置信度区间下限。
这项准则（旨在以最大程度地提高奖励，同时尽量消除将来发生奖励损失的可能性）由个性化体验创建服务管理，并从 [Seldonian 算法](https://aisafety.cs.umass.edu/overview.html) 和 AI 安全性研究中吸取经验。

#### <a name="limitations-of-auto-optimize"></a>自动优化的限制

个性化体验创建服务自动优化依赖于基于过去一段时间的评估来估算将来的性能。 外部因素、应用程序和用户可能导致个性化体验创建服务模型基于过去时间段做出的估算和预测并不能代表将来。

自动优化预览版不适用于已启用多槽个性化 API 预览版功能的个性化体验创建服务循环。 

## <a name="next-steps"></a>后续步骤

* [脱机评估](concepts-offline-evaluation.md)
* [学习策略和设置](concept-active-learning.md)
* [如何使用脱机评估分析个性化体验创建服务](how-to-offline-evaluation.md) 
* [AI 安全性研究](https://aisafety.cs.umass.edu/overview.html) 
