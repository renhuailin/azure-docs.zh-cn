---
title: 事件中心高级层（预览版）概述
description: 本文概述 Azure 事件中心高级层，它提供事件中心的多租户部署来满足高端流式处理需求。
ms.topic: article
ms.date: 5/25/2021
ms.openlocfilehash: d60469937324226b8d928fb257d83966c52dce7e
ms.sourcegitcommit: 5163ebd8257281e7e724c072f169d4165441c326
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/21/2021
ms.locfileid: "112415002"
---
# <a name="overview-of-event-hubs-premium-preview"></a>事件中心高级层（预览版）概述

事件中心高级层专用于需要弹性、优异性能且延迟可预测的高端流式处理方案。 性能是通过提供预留的计算、内存和存储资源实现的，这些资源可以最大程度减少托管多租户 PaaS 环境中的跨租户干扰。 

事件中心高级层预览版引入了新的双层原生代码日志引擎，与以往的代系相比，该引擎的可预测性要好得多，发送和直通延迟要低得多，而且对持久性不会造成任何不利影响。 在可能的情况下，事件中心高级层会将每个事件复制到分布在不同 Azure 可用性区域中的三个副本，并且只有在所有副本以同步方式刷新到底层快速存储之后，才将发送操作报告为已完成。 不立即读取的或者以后需要再次读取的事件最长可保留 90 天，它们以透明方式保存在可用性区域冗余的存储层中。 快速存储和保留存储层中的事件均已加密；在事件中心高级层中，加密密钥可由你提供。 

除了这些与存储相关的功能以及事件中心标准层产品/服务的所有功能和协议支持以外，事件中心高级层的隔离模型还能实现动态分区纵向扩展等新功能，以及尚待添加的功能。 此外，它提供的配额分配也要慷慨得多。 事件中心捕获是免费随附的。

> [!IMPORTANT]
> 事件中心高级层目前以公共预览版提供。 此预览版在提供时没有附带服务级别协议，不建议将其用于生产工作负荷。 某些功能可能不受支持或者受限。 有关详细信息，请参阅 [Microsoft Azure 预览版补充使用条款](https://azure.microsoft.com/support/legal/preview-supplemental-terms/)。
 
高级层产品/服务按[处理单位 (PU)](event-hubs-scalability.md#processing-units) 计费，PU 对应于底层基础结构中共享的隔离资源（CPU、内存和存储）。 

由于事件中心高级层在可快速转移资源的极大型多租户环境中提供隔离，因此与专用产品/服务相比，它在缩放时的弹性和速度要高得多，并且 PU 可以动态调整。 因此，对于中等范围（<120MB/秒）的吞吐量要求，事件中心高级层通常比事件中心专用层更具成本效益，尤其是当负载在一天或一周中不断变化时。 
> [!NOTE]
> 请注意，事件中心高级版仅支持 TLS 1.2 或更高版本。 

在通过可用性区域支持提供额外的可靠性方面，事件中心专用层的最小部署规模为 8 个容量单位 (CU)，而事件中心高级层在所有 AZ 区域的第一个 PU 中即提供可用性区域支持。 

你可以为每个命名空间购买 1、2、4、8 和 16 个处理单位。 由于事件中心高级层是基于容量的产品/服务，可实现的吞吐量不是像事件中心标准层中那样按照限制量规定的，而是像事件中心专用层那样，取决于你要求事件中心执行的工作。 每个 PU 的有效引入和流式传输吞吐量取决于各种因素，包括：

* 生成者和使用者的数量
* 有效负载大小 
* 分区计数
* 流出请求速率 
* 事件中心捕获、架构注册表和其他高级功能的使用情况

有关更多详细信息，请参阅[事件中心 SKU 之间的比较](event-hubs-quotas.md)。


> [!NOTE]
> 为 Apache Kafka RPC 协议默认启用的所有事件中心命名空间可由现有的基于 Kafka 的应用程序使用。 在群集上启用 Kafka 不影响非 Kafka 用例；没有对应的选项，或者不需要在群集上禁用 Kafka。

## <a name="why-premium"></a>为何要选择高级层？

对于需要在多租户环境中实现更好的隔离以及较低延迟和较高数据引入吞吐量的客户而言，高级事件中心提供三个引人注目的优势。

#### <a name="superior-performance-with-the-new-two-tier-storage-engine"></a>新的双层存储引擎提供卓越的性能

事件中心高级层使用新的双层日志存储引擎，它能极大地提高数据引入性能，并大幅减少整体延迟和延迟抖动，且不影响持久性保证。 

#### <a name="better-isolation-and-predictability"></a>更好的隔离性和可预测性

事件中心高级层提供隔离的计算和内存容量，可在多租户部署中实现更具可预测性的延迟，并大大降低产生“坏邻居效应”的风险。

事件中心高级层在其多租户群集中实现“群集中的群集”模型，以提供可预测性和性能，同时保留了托管多租户 PaaS 环境的所有优势。 


#### <a name="cost-savings-and-scalability"></a>成本节省和可伸缩性
由于事件中心高级层是一个多租户产品/服务，因此可以更灵活且更快速地动态缩放。 容量是按处理单位分配的（在群集内部分配隔离的 CPU/内存 Pod）。 可按命名空间纵向扩展/缩减这些 Pod 的数目。 因此，事件中心高级层是一个低成本的选项，适用于总体吞吐量范围小于 120 MB/秒但高于标准 SKU 可实现的级别的消息传递方案。  

## <a name="quotas-and-limits"></a>配额和限制
高级层提供标准计划的所有功能，但其性能和隔离性更好，且配额更高。 有关详细的配额和限制，请参阅[事件中心配额和限制](event-hubs-quotas.md)


## <a name="faqs"></a>常见问题解答

[!INCLUDE [event-hubs-dedicated-clusters-faq](./includes/event-hubs-premium-faq.md)]

## <a name="next-steps"></a>后续步骤

可以通过 [Azure 门户](https://portal.azure.com/#create/Microsoft.EventHub)开始使用事件中心高级层（预览版）。 请参阅[事件中心高级层定价](https://azure.microsoft.com/pricing/details/event-hubs/)了解有关定价的更多详细信息，并参阅[事件中心常见问题解答](event-hubs-faq.yml)查找有关事件中心的一些常见问题的解答。 

