---
title: 标记图像和文本文档
title.suffix: Azure Machine Learning
description: 使用数据标签工具在数据标签项目中快速标记机器学习的文本或图像。
author: sdgilley
ms.author: sgilley
ms.service: machine-learning
ms.subservice: mldata
ms.topic: how-to
ms.date: 09/24/2021
ms.custom: data4ml
ms.openlocfilehash: d07a48267effa51a721d1b64c79bc0a6ba7d439f
ms.sourcegitcommit: f29615c9b16e46f5c7fdcd498c7f1b22f626c985
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/04/2021
ms.locfileid: "129429635"
---
# <a name="labeling-images-and-text-documents"></a>标记图像和文本文档

项目管理员在 Azure 机器学习中创建[图像数据标签项目](./how-to-create-image-labeling-projects.md)或[文本数据标签项目](./how-to-create-text-labeling-projects.md)后，你可以使用标签工具为机器学习项目快速准备数据。 本文介绍：

> [!div class="checklist"]
> * 如何访问标签项目
> * 标记工具
> * 如何使用工具执行特定的标签任务

## <a name="prerequisites"></a>先决条件

* 或组织和项目的 [Microsoft 帐户](https://account.microsoft.com/account)或 Azure Active Directory 帐户
* 对包含标签项目的工作区具有参与者级别访问权限。

## <a name="sign-in-to-the-studio"></a>登录到工作室

1. 登录到 [Azure 机器学习工作室](https://ml.azure.com)。

1. 选择包含标签项目的订阅和工作区。  从项目管理员处获取此信息。

1. 选择左侧的“数据标记”来查找项目。  

## <a name="understand-the-labeling-task"></a>了解标记任务

在数据标签项目的表中，为项目选择“标签数据”链接。

你会看到特定于项目的说明。 其中解释了现有的数据类型、如何做出决策以及其他相关信息。 阅读此信息后，在页面顶部选择“任务”。  或者在页面底部选择“开始标记”。

## <a name="selecting-a-label"></a>选择标签

在所有数据标签任务中，均需从项目管理员指定的集中选择一个或多个适当的标签。 可以使用键盘上的数字键选择前九个标记。  

## <a name="assisted-machine-learning"></a>辅助机器学习

标记期间可以触发机器学习算法。 如果在项目中启用了这些算法，你可能会看到以下内容：

* 对于图像，在标记一定数量的数据后，你可能会在屏幕顶部的项目名称旁边看到“群集任务”。  这意味着这些图像被分组到一起，在同一页面上呈现相似的图像。  如果是这样，请切换到多个图像视图中的一个来利用分组。  

* 稍后，你可能会在项目名称旁边看到“预标记任务”。  随后，将显示带有建议标签的项目，这类标签由机器学习分类模型提供。 任何机器学习模型都达不到 100% 的准确度。 虽然我们只使用模型有信心识别的数据，但这些数据仍可能存在预标记错误。  查看标签时，请先更正所有错误的标签，然后再提交页面。  

* 在对象标识模型中，可能已经存在边界框和标签。  在提交页面之前更正不正确的任何内容。

* 在分段模型中，可能已经存在多边形和标签。  在提交页面之前更正不正确的任何内容。 

特别是在标记项目的早期阶段，机器学习模型可能只能准确地预标记一小部分图像。 在标记这些图像后，标记项目将返回到手动标记，为下一轮模型训练收集更多数据。 随着时间的推移，模型将对更高比例的图像更有信心，从而在项目的后期产生更多的预标记任务。

## <a name="image-tasks"></a><a name="image-tasks"></a> 图像任务

对于图像分类任务，可选择同时查看多个图像。 使用图像区域上方的图标选择布局。

若要同时选择所有显示的图像，请使用“全选”。 若要选择单个图像，请使用图像右上角的循环选择按钮。 必须至少选择一个图像才能应用标记。 如果选择多个图像，选择的任何标记将应用到所有选定的图像。

此处我们选择了 2x2 布局，并将“哺乳动物”标记应用到熊和虎鲸的。 鲨鱼图像标记为“软骨鱼”；尚未对鬣蜥进行标记。

![多个图像布局和选择](./media/how-to-label-data/layouts.png)

> [!Important] 
> 仅当有包含未标记数据的新页面时，才可以切换布局。 切换布局会清除页面的正在进行的标记工作。

当你在页面上标记所有图像时，Azure 会启用“提交”按钮。 选择“提交”以保存工作。

提交手头数据的标记后，Azure 将使用工作队列中的一组新图像刷新页面。

## <a name="medical-image-tasks"></a>医学图像任务

> [!IMPORTANT]
> 为 DICOM 或类似图像类型设置标签的功能不应用于或不可供用于医疗设备、临床支持、诊断工具或者其他旨在用于诊断、治愈、缓解、治疗或预防疾病或其他健康问题的技术，Microsoft 不授予将此功能用于此类目的的任何许可或权利。 此功能不旨在代替专业人员医疗建议或保健意见、诊断、治疗或医疗保健专业人员临床判断而实施或部署，并且不应用作此用途。 客户只负责对 DICOM 或类似图像类型使用数据标签。

图像项目支持用于 X 光文件图像的 DICOM 图像格式。

:::image type="content" source="media/how-to-label-data/x-ray-image.png" alt-text="要设置标签的 X 光 DICOM 图像。":::

虽然在为医学图像设置标签时使用的工具与用于任何其他图像的工具相同，但还有另外一个用于 DICOM 图像的工具。  选择“窗口和级别”工具，以更改图像的强度。 此工具只可用于 DICOM 图像。

:::image type="content" source="media/how-to-label-data/window-level-tool.png" alt-text="用于 DICOM 图像的“窗口和级别”工具。":::

## <a name="tag-images-for-multi-class-classification"></a>标记图像以进行多类分类

如果项目的类型为“图像分类多类”，则会将单一标记分配给整个图像。 若要随时查看指导，请转到“说明”页，然后选择“查看详细说明”。

如果在向图像分配标记后发现有误，可以修复标记。 选择图像下面显示的标签上的“X”可以清除标记。 或者选择该图像，然后选择另一个类。 新选择的值将替换以前应用的标记。

## <a name="tag-images-for-multi-label-classification"></a>标记图像以进行多标签分类

如果正在处理类型为“多标签图像分类”的项目，则会将一个或多个标记应用到图像。 若要查看特定于项目的指导，请选择“说明”并转到“查看详细说明”。

选择要标记的图像，然后选择标记。 该标记将应用到所有选定的图像，然后会取消选择这些图像。 若要应用多个标记，必须重新选择图像。 以下动画演示了多标签标记：

1. “全选”用于应用“海洋”标记。
1. 选择单个图像并将其标记为“特写”。
1. 选择了三个图像，并将其标记为“广角”。

![演示多标签流的动画](./media/how-to-label-data/multilabel.gif)

若要更正错误，可以单击“X”以清除单个标记，或选择图像后选择标记，从所有选定图像中清除该标记。 此处演示了上述场景。 单击“陆地”会从两个选定图像中清除该标记。

![显示多个取消选择操作的屏幕截图](./media/how-to-label-data/multiple-deselection.png)

仅当将至少一个标记应用于每个图像后，Azure 才会启用“提交”按钮。 选择“提交”以保存工作。

## <a name="tag-images-and-specify-bounding-boxes-for-object-detection"></a>标记图像并指定边界框以进行对象检测

如果项目的类型为“对象标识(边界框)”，请在图像中指定一个或多个边界框，并将标记应用到每个框。 图像都可以有多个边界框，每个框具有单个标记。 使用“查看详细说明”来确定项目中是否使用了多个边界框。

1. 选择要创建的边界框的标记。
1. 选择“矩形框”工具 ![矩形框工具](./media/how-to-label-data/rectangular-box-tool.png) 或按“R”。
3. 在目标中单击并沿对角线拖动以创建大致的边界框。 若要调整边界框，请拖动边或角。

![创建边界框](./media/how-to-label-data/bounding-box-sequence.png)

若要删除边界框，请在创建后单击边界框旁边显示的 X 形目标。

无法更改现有边界框的标记。 如果错误地分配了标记，则必须删除边界框，并使用正确的标记创建新的边界框。

默认情况下，可以编辑现有的边界框。 “锁定/解锁区域”工具 ![锁定/解锁区域工具](./media/how-to-label-data/lock-bounding-boxes-tool.png) 或“L”可切换该行为。 如果区域已锁定，则只能更改新边界框的形状或位置。

使用区域操作工具 ![这是区域操作工具图标 - 从中心指向上、下、左、右的四个箭头。](./media/how-to-label-data/regions-tool.png) 或“M”调整现有边界框。 拖动边或角来调整形状。 在内部单击即可拖动整个边界框。 如果无法编辑某个区域，则很可能已切换了“锁定/解锁区域”工具。

使用“基于模板的框”工具 ![模板的框工具](./media/how-to-label-data/template-box-tool.png) 或“T”来创建大小相同的多个边界框。 如果图像没有边界框，并且你激活基于模板的框，则该工具将生成 50x50 像素框。 如果创建边界框，然后激活基于模板的框，任何新边界框将采用上次创建的框的大小。 可以在放置后调整基于模板的框的大小。 调整基于模板的框的大小只会调整该特定框的大小。

若要删除当前图像中的所有边界框，请选择“删除所有区域”工具 ![删除区域工具](./media/how-to-label-data/delete-regions-tool.png)。

创建图像的边界框后，请选择“提交”以保存工作，否则正在进行的工作不会保存。

## <a name="tag-images-and-specify-polygons-for-image-segmentation"></a>标记图像并为图像分段指定多边形 

如果项目的类型为“实例分段(多边形)”，你将在图像中指定一个或多个多边形，并对每个多边形应用标记。 图像都可以有多个边界多边形，每个多边形都具有一个标记。 使用“查看详细说明”来确定项目中是否使用了多个边界多边形。

1. 选择要创建的多边形的标记。
1. 选择“绘制多边形区域”工具![“绘制多边形区域”工具](./media/how-to-label-data/polygon-tool.png)或选择“P”。
1. 单击多边形中的每个点。  完成形状后，双击以完成。

    :::image type="content" source="media/how-to-label-data/polygon.gif" alt-text="为猫和狗创建多边形":::

若要删除多边形，请在创建后单击多边形旁边显示的 X 形目标。

如果要更改多边形的标记，请选择“移动区域”工具，单击多边形，然后选择正确的标记。

你可以编辑现有多边形。 “锁定/解锁区域”工具![使用“锁定/解锁区域”工具编辑多边形](./media/how-to-label-data/lock-bounding-boxes-tool.png)或“L”可切换该行为。 如果区域已锁定，则只能更改新多边形的形状或位置。

使用“添加或删除多边形顶点”工具![这是“添加或删除多边形顶点”工具图标。](./media/how-to-label-data/add-remove-points-tool.png) 或“U”调整现有多边形。 单击多边形以添加或删除点。 如果无法编辑某个区域，则很可能已切换了“锁定/解锁区域”工具。

若要删除当前图像中的所有多边形，请选择“删除所有区域”工具![“删除所有区域”工具](./media/how-to-label-data/delete-regions-tool.png)。

为图像创建多边形后，请选择“提交”以保存工作，否则正在进行的工作不会保存。

## <a name="label-text-preview"></a><a name="label-text"></a>标记文本（预览版）

> [!IMPORTANT]
> 文本标签采用公共预览版。
> 该预览版在提供时没有附带服务级别协议，建议不要将其用于生产工作负载。 某些功能可能不受支持或者受限。 有关详细信息，请参阅 [Microsoft Azure 预览版补充使用条款](https://azure.microsoft.com/support/legal/preview-supplemental-terms/)。

标记文本时，请使用工具栏执行以下操作：

* 增加或缩减文本大小
* 更改字体
* 跳过标记此项并移至下一项

如果分配标签后发现出错，可以进行修正。 选择文本下面所显示标签上的“X”可清除标签。

有两种文本项目类型：


|项目类型  |标记  |
|---------|---------|
| 分类多类 | 向整个文本项分配一个标签。  只能为每个文本项选择一个标签。   |
| 分类多标签     | 向每个文本项分配一个或多个标签。  可以为每个文本项选择多个标签。       |

若要查看特定于项目的指导，请选择“说明”并转到“查看详细说明”。

## <a name="finish-up"></a>完成

当你提交已标记数据的页时，Azure 会从工作队列为你分配新的未标记数据。 如果没有其他未标记的数据，你将看到一条消息，其中包含门户主页的链接。

完成标记操作后，请在标记门户的右上角选择自己的姓名，然后选择“注销”。如果未注销，最终 Azure 会“超时”并将数据分配给另一个做标签的人。

## <a name="next-steps"></a>后续步骤

* 了解[在 Azure 中训练图像分类模型](./tutorial-train-models-with-aml.md)


