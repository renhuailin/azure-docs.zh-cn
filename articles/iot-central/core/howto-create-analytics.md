---
title: 在 Azure IoT Central 应用程序中分析设备数据 | Microsoft Docs
description: 在 Azure IoT Central 应用程序中分析设备数据。
author: ankitscribbles
ms.author: ankitgup
ms.date: 08/16/2021
ms.topic: how-to
ms.service: iot-central
services: iot-central
ms.openlocfilehash: 1a664ac69ba05cc44aba9d18ffc436a98dbab154
ms.sourcegitcommit: add71a1f7dd82303a1eb3b771af53172726f4144
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/03/2021
ms.locfileid: "123431093"
---
# <a name="how-to-use-analytics-to-analyze-device-data"></a>如何使用分析功能来分析设备数据

Azure IoT Central 提供丰富的分析功能，用于分析历史趋势并关联来自设备的遥测数据。 若要开始使用，请选择左侧窗格中的“分析”。

## <a name="understand-the-analytics-ui"></a>理解分析用户界面

分析用户界面由三个主要组件构成：

- 数据配置面板：在配置面板上，选择要分析其数据的设备组。 接下来选择要分析的遥测项，并为每个遥测项选择聚合方法。 “分组依据”控件有助于以设备属性作为维度来分组数据。

- 时间控件：用于选择要分析数据的持续时间。 可以拖动时间滑块的任何一端来选择时间跨度。 时间控件还有一个“间隔大小”滑块，可控制用于聚合数据的存储桶或间隔大小。

- 图表控件：图表控件将数据可视化为折线图。 可通过与图表图例交互来切换特定线条的可见性。

  :::image type="content" source="media/howto-create-analytics/analytics-ui.png" alt-text="分析用户界面三个区域的屏幕截图。":::

## <a name="query-your-data"></a>查询数据

选择一个设备组以开始使用，然后选择要分析的遥测数据。 完成后，选择“分析”，开始可视化数据：

- 设备组：[设备组](tutorial-use-device-groups.md)是用户定义的设备组。 例如，奥克兰市的所有冰箱，或所有 2.0 版本的风力涡轮机。

- 遥测：选择要分析和探索的遥测。 可选择多个遥测类型并同时分析。 对于数值数据类型，默认聚合方法设置为 Average；对于字符串类型，则设置为 Count。 数值数据类型的聚合方法包括 Average、Maximum、Minimum、Count 以及 Sum。 对于字符串而言，Count 是唯一的聚合方法。

    > [!NOTE]
    > 只有在查询条件为 true 时，才显示历史数据点。 例如，设备前一天从 Template1 升级到 Template2。 现在，若查询包含 Template1 设备的设备组，则会看到前一天及之前的设备数据。 若查询包含 Template2 设备的设备组，则会看到设备升级及之后的数据。

- 分组依据：“分组依据”控件有助于以设备属性作为维度来分组数据。  设备发送数据时，系统将会合并设备遥测数据和属性以及云属性。 若云或设备属性已更新，图表上会显示按不同值分组的遥测项。

    > [!TIP]
    > 若要单独查看每个设备的数据，请在“分组依据”控件中选择“设备 ID”。 

## <a name="interact-with-your-data"></a>与你的数据进行交互

查询数据后，可在折线图上将其可视化。 可在网格中显示或隐藏遥测数据、更改持续时间或查看数据。

- “时间编辑器”面板：默认情况下，你会看到前一天的数据。 可拖动时间滑块的任何一端来更改持续时间。 还可以使用日历控件选择某个预定义的时间桶，或选择自定义时间范围。 时间控件还有一个“间隔大小”滑块，可控制用于聚合数据的间隔大小。

  :::image type="content" source="media/howto-create-analytics/time-editor-panel.png" alt-text="“时间编辑器”面板的屏幕截图。":::

  - “内部日期范围”滑块工具：拖动两个端点控件，用它们选择所需的时间跨度。 “内部日期范围”受“外部日期范围”滑块控件约束。
  
  - “外部日期范围”滑块控件：使用端点控件来选择外部日期范围，此范围可用于内部日期范围控件。

  - 增加和减少日期范围按钮：通过选择任一按钮来增加或减少时间跨度，从而获得所需间隔。

  - “间隔大小”滑块：用于放大和缩小同一时间跨度的间隔。 通过此操作，可更精确地控制较大时间片段之间的移动。 可以使用该控件查看数据的高分辨率精细视图（精度可达毫秒）。 滑块的默认起点可为所选数据提供最佳视图。 此视图会平衡分辨率、查询速度和粒度。
  
  - 日期范围选取器：使用此控件选择所需的日期和时间范围。 还可以使用该控件在不同时区之间切换。 进行更改之后，若要应用于当前工作区，请选择“保存”。

  > [!TIP]
  > 间隔大小根据所选时间跨度动态确定。 较小的时间跨度可使数据聚合到最长几秒钟的极精细间隔。

- 图表图例：“图表图例”会在图表上显示所选的遥测数据。 将鼠标悬停在图例中的每一项上，使其在图表上成为焦点。 使用“分组依据”时，系统会按所选维度的值对遥测数据进行分组。 你可以切换各个遥测数据类型的可见性，或单击组名称以切换组可见性。  

- Y 轴格式控件：Y 轴模式可在可用的 Y 轴视图选项中来回切换。 只有在可视化多个遥测类型时，此控件才可用。 这三种模式包括：

  - 堆叠：每个遥测数据类型的图形堆叠在一起，每个图形都有自己的 Y 轴。 此模式为默认模式。
  - 共享：每种遥测数据类型的图形都针对相同的 y 轴绘制。
  - 重叠：通过这种模式，可在同一个 Y 轴上堆叠多条线，Y 轴数据会根据所选的线而变化。

  :::image type="content" source="media/howto-create-analytics/y-axis-control.png" alt-text="突出 Y 轴控件的屏幕截图。":::

- “缩放”控件：使用“缩放”控件，可进一步深入了解数据。 若在结果集中找到要重点关注的时间段，请使用鼠标指针突出显示该区域。 然后右键单击所选区域，选择“缩放”。

  :::image type="content" source="media/howto-create-analytics/zoom.png" alt-text="显示“缩放”控件用法的屏幕截图。":::

选择省略号，了解更多图表控件：

- 显示网格：以表格样式显示结果，以便查看每个数据点的值。

- 下载为 CSV：将结果导出为逗号分隔值 (CSV) 文件。 CSV 文件包含每个设备的数据。 结果是使用指定的间隔和期限导出。

- 放置标记：“放置标记”控件提供了定位图表上某些数据点的方法。 尝试跨不同时间段比较多个线条的数据时，此控件非常有用。

  :::image type="content" source="media/howto-create-analytics/additional-chart-controls.png" alt-text="显示如何访问其他图表控件的屏幕截图。":::

## <a name="next-steps"></a>后续步骤

了解如何使用内置分析功能可视化数据后，建议接下来了解如何[使用数据导出将 IoT 数据导出到云目标](howto-export-data.md)。
